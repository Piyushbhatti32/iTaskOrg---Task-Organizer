FROM node:18-alpine

# Install pnpm
RUN npm install -g pnpm

# Set working directory
WORKDIR /app

# Copy only package manager files first (cache-friendly)
COPY package.json pnpm-workspace.yaml ./

# Copy app package.json files
COPY apps ./apps
COPY packages ./packages

# Install dependencies
RUN pnpm install

# Default command (override per usage)
CMD ["pnpm", "dev:web"]
